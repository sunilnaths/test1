pipeline {
  agent any

  stages {
      stage("Hello") {
          environment {
              My_Username = credentials("admin-user")
              
          }

        steps {
            sh "echo 'username: $My_Username_USR'"
            sh "echo 'password: $My_Username_PSW'"
            sh 'rm -rf build'
            sh 'mkdir build'
            sh "echo 'username: $My_Username_USR' >> build/newfile.yaml"
            sh "echo 'password: $My_Username_PSW' >> build/newfile.yaml"
            
       }
    }
      stage("Test") {
          steps {
          emailext body: '<a href="${BUILD_URL}input">click to approve</a>',
          mimeType: 'text/html',
          subject: 'Build Approval Request',
          to: 'sunilnaths@gmail.com'
       }
    }
      stage("Test") {
          steps {
          sh "grep 'username' build/newfile.yaml"
          sh "grep 'password' build/newfile.yaml"
              
          }
          
      }
  }
}
